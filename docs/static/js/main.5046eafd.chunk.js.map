{"version":3,"sources":["query/bloxyHolders.js","query/etherscanHolders.js","query/contractLabels.js","query/tokenPrice.js","App.js","reportWebVitals.js","index.js"],"names":["BLOXY_API_KEY","bloxyHolders","token","a","fetch","response","json","res","i","length","cell","data","rank","label","annotation","trim","contract","address_type","address","toLowerCase","amount","balance","push","etherscanHolders","network","domain","text","html","page","cheerio","load","cells","find","eq","Number","has","attr","split","pop","replaceAll","percent","SPREADSHEET_ID","getContractLabels","parser","GoogleSheetParser","parse","items","item","getTokenPrice","tokenDetails","coingeckoId","tokenOptions","key","value","tokenDetailsByAddress","details","renderTable","contracts","labels","tokenPrice","etherscanDomain","Table","textAlign","celled","padded","compact","collapsing","style","margin","Header","Row","HeaderCell","Body","map","Cell","href","website","formatTVL","Math","round","App","useState","setTokenDetails","setContracts","setLabels","setTokenPrice","useEffect","queryTopContracts","queryLabels","queryTokenPrice","className","Form","Dropdown","selection","options","defaultValue","onChange","_","Container","Loader","active","inline","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5046eafd.chunk.js","sourcesContent":["const BLOXY_API_KEY = 'ACCsay814xxhw';\n\n// ethereum only\nexport async function bloxyHolders(token) {\n  const response = await fetch(`https://api.bloxy.info/token/token_holders_list?token=${token}&limit=500&key=${BLOXY_API_KEY}&format=structure`);\n  const json = await response.json();\n  const res = [];\n  for (let i = 0; i < json.length; i++) {\n    const cell = json[i];\n    const data = {};\n    data.rank = i;\n    data.label = cell.annotation.trim();\n    data.contract = cell.address_type !== 'Wallet';\n    data.address = cell.address.toLowerCase();\n    data.amount = cell.balance;\n    if (data.contract) res.push(data);\n  }\n  return res;\n}","import cheerio from 'cheerio';\n\n// network: ethereum / bsc\nexport async function etherscanHolders(network, token) {\n  const domain = network === 'ethereum' ? 'etherscan.io' : 'bscscan.com';\n  const response = await fetch(`https://thingproxy.freeboard.io/fetch/https://${domain}/token/tokenholderchart/${token}?range=500`);\n  const html = await response.text();\n  const page = cheerio.load(html);\n  const res = [];\n  const cells = page('table').find('tr td');\n  let data;\n  for (let i = 0; i < cells.length; i++) {\n    const cell = cells.eq(i);\n    switch (i % 4) {\n      case 0:\n        data = {};\n        data.rank = Number(cell.text());\n        break;\n      case 1:\n        data.label = cell.text().trim();\n        data.contract = cell.has('i').length > 0;\n        data.address = '0x' + cell.find('a').attr('href').split('0x').pop().toLowerCase();\n        break;\n      case 2:\n        data.amount = Number(cell.text().replaceAll(',', ''));\n        break;\n      case 3:\n        data.percent = Number(cell.text().replaceAll('%', ''));\n        if (data.contract) res.push(data);\n        break;\n      default:\n    }\n  }\n  return res;\n}","import GoogleSheetParser from 'public-google-sheets-parser';\n\nconst SPREADSHEET_ID = '1dVakt-XR9TNiV9K0334UEo0w9lc2NIOYC_J1yiTPx6w';\n\n// network: ethereum / bsc\nexport async function getContractLabels(network) {\n  const parser = new GoogleSheetParser();\n  const items = await parser.parse(SPREADSHEET_ID, network);\n  const res = {};\n  for (let i = 0; i < items.length; i++) {\n    const item = items[i];\n    res[item.address] = item;\n  }\n  return res;\n}\n","export async function getTokenPrice(tokenDetails) {\n  if (!tokenDetails || !tokenDetails.coingeckoId) return null;\n  const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${tokenDetails.coingeckoId}&vs_currencies=usd`);\n  const json = await response.json();\n  return Number(json[tokenDetails.coingeckoId]['usd']);\n}","import 'semantic-ui-css/semantic.min.css';\nimport './App.css';\n\nimport React, { useState, useEffect } from 'react';\nimport { Dropdown, Loader, Table, Container, Form } from 'semantic-ui-react';\n\nimport { bloxyHolders } from './query/bloxyHolders';\nimport { etherscanHolders } from './query/etherscanHolders';\nimport { getContractLabels } from './query/contractLabels';\nimport { getTokenPrice } from './query/tokenPrice';\n\nconst contractsGoogleSheet = 'https://docs.google.com/spreadsheets/d/1dVakt-XR9TNiV9K0334UEo0w9lc2NIOYC_J1yiTPx6w/edit?usp=sharing';\n\nconst tokenOptions = [\n  {\n    network: 'ethereum',\n    key: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    text: 'Eth: USDC',\n    value: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    coingeckoId: 'usd-coin'\n  },\n  {\n    network: 'ethereum',\n    key: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    text: 'Eth: WETH',\n    value: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    coingeckoId: 'ethereum'\n  },\n  {\n    network: 'ethereum',\n    key: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',\n    text: 'Eth: WBTC',\n    value: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',\n    coingeckoId: 'wrapped-bitcoin'\n  },\n  {\n    network: 'ethereum',\n    key: '0xeb4c2781e4eba804ce9a9803c67d0893436bb27d',\n    text: 'Eth: renBTC',\n    value: '0xeb4c2781e4eba804ce9a9803c67d0893436bb27d',\n    coingeckoId: 'renbtc'\n  },\n  {\n    network: 'bsc',\n    key: '0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56',\n    text: 'Bsc: BUSD',\n    value: '0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56',\n    coingeckoId: 'binance-usd'\n  },\n  {\n    network: 'bsc',\n    key: '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d',\n    text: 'Bsc: USDC',\n    value: '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d',\n    coingeckoId: 'usd-coin'\n  },\n  {\n    network: 'bsc',\n    key: '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c',\n    text: 'Bsc: WBNB',\n    value: '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c',\n    coingeckoId: 'binance-coin'\n  },\n  {\n    network: 'bsc',\n    key: '0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c',\n    text: 'Bsc: BTCB',\n    value: '0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c',\n    coingeckoId: 'binance-bitcoin'\n  }\n];\n\nconst tokenDetailsByAddress = {};\nfor (let i = 0; i < tokenOptions.length; i++) {\n  const details = tokenOptions[i];\n  tokenDetailsByAddress[details.key.toLowerCase()] = details;\n}\n\nfunction App() {\n  const [tokenDetails, setTokenDetails] = useState(tokenOptions[0]);\n  const [contracts, setContracts] = useState(null);\n  const [labels, setLabels] = useState(null);\n  const [tokenPrice, setTokenPrice] = useState(null);\n  useEffect(() => {\n    const queryTopContracts = async () => {\n      setContracts(null);\n      const res = tokenDetails.network === 'ethereum' ? \n        await bloxyHolders(tokenDetails.value) :\n        await etherscanHolders(tokenDetails.network, tokenDetails.value);\n      setContracts(res);\n    }\n    const queryLabels = async () => {\n      setLabels(null);\n      const res = await getContractLabels(tokenDetails.network);\n      setLabels(res);\n    }\n    const queryTokenPrice = async () => {\n      setTokenPrice(null);\n      const res = await getTokenPrice(tokenDetails);\n      setTokenPrice(res);\n    }\n    queryTopContracts();\n    queryLabels();\n    queryTokenPrice();\n  }, [tokenDetails]);\n  return (\n    <div className=\"App\">\n      <Form style={{margin: '20px'}}>\n        <Dropdown\n          selection\n          options={tokenOptions}\n          defaultValue={tokenOptions[0].value}\n          onChange={(_, data) => {\n            setTokenDetails(tokenDetailsByAddress[data.value.toLowerCase()]);\n          }}\n        />\n      </Form>\n      <Container>\n      {contracts === null || labels === null || tokenPrice === null ? \n        <Loader active inline='centered' /> :\n        renderTable(tokenDetails.network, contracts, labels, tokenPrice)\n      }\n      </Container>\n    </div>\n  );\n}\n\nfunction renderTable(network, contracts, labels, tokenPrice) {\n  const etherscanDomain = network === 'ethereum' ? 'etherscan.io' : 'bscscan.com';\n  return (\n    <Table textAlign='left' celled padded compact collapsing style={{margin: 'auto'}}>\n      <Table.Header>\n      <Table.Row>\n        <Table.HeaderCell>Address</Table.HeaderCell>\n        <Table.HeaderCell>Label</Table.HeaderCell>\n        <Table.HeaderCell>Amount</Table.HeaderCell>\n      </Table.Row>\n      </Table.Header>\n      <Table.Body>\n        {\n          contracts.map((item) => (\n            <Table.Row>\n              <Table.Cell><a href={`https://${etherscanDomain}/address/${item.address}`}>{item.address}</a></Table.Cell>\n              <Table.Cell><a href={\n                labels[item.address] ?\n                labels[item.address].website :\n                contractsGoogleSheet\n              }>{\n                labels[item.address] ?\n                labels[item.address].label :\n                `<please add>`\n              }</a></Table.Cell>\n              <Table.Cell>{formatTVL(item.amount * tokenPrice)}</Table.Cell>\n            </Table.Row>\n          ))\n        }\n      </Table.Body>\n    </Table>\n  );\n}\n\nfunction formatTVL(amount) {\n  if (amount > 1e9) return '$' + Math.round(amount/1e9) + 'B';\n  if (amount > 1e6) return '$' + Math.round(amount/1e6) + 'M';\n  if (amount > 1e3) return '$' + Math.round(amount/1e3) + 'K';\n  return '$' + Math.round(amount);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}